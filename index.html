<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hot New Restaurant Home Page</title>

    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
      integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1 class="text-center">
          <span class="glyphicon glyphicon-fire"></span> Hot New Restaurant
        </h1>
        <hr />
        <h2 class="text-center">
          We only have 5 tables! Book your seat before they all are gone!
        </h2>
        <br />

        <div class="text-center">
          <a href="/view.html"
            ><button type="button" class="btn btn-lg btn-primary">
              <span class="glyphicon glyphicon-list-alt"></span> View Tables
            </button></a
          >
          <a href="/reservation.html"
            ><button type="button" class="btn btn-lg btn-danger">
              <span class="glyphicon glyphicon-credit-card"></span> Make
              Reservation
            </button></a
          >
        </div>
      </div>

      <footer class="footer">
        <div class="container">
          <p>
            <a href="/api/tables">API Table Link</a> |
            <a href="/api/waitlist">API Wait List</a>
          </p>
        </div>
      </footer>
    </div>

    <script>
    // Dependencies
// ===========================================================
var express = require('express');

var app = express();
var PORT = 3000;

// Data
// ===========================================================
var reservation = [
 
];

// Routes
// ===========================================================
app.get('/', function(req, res) {
  res.send('Welcome to the reservations page!');
});

// Displays all reservations
app.get('/api/reservation', function(req, res) {
  return res.json(reservation);
});

// Displays a single reservation, or shows "No reservation found"
app.get('/api/reservation/:reservation', function(req, res) {
  // Grab the selected parameter
  var chosen = req.params.reservation;
  console.log(chosen);

  // Filter to show only the selected reservation
  for (var i = 0; i < reservation.length; i++) {
    if (chosen === reservation[i].routeName) {
      return res.json(reservation[i]);
    }
  }

  // Otherwise display "No reservation found"
  return res.send('No reservation found');
});

// Create New Reservation - takes in JSON input
app.post("/api/reservation", function(req, res) {
  // req.body hosts is equal to the JSON post sent from the user
  // This works because of our body parsing middleware
  var newReservation = req.body;
  // Using a RegEx Pattern to remove spaces from newCharacter
  // You can read more about RegEx Patterns later https://www.regexbuddy.com/regex.html
  newReservation.routeName = newReservation.name.replace(/\s+/g, "").toLowerCase();
  console.log(newReservation);
  reservation.push(newReservation);
  res.json(newReservation);
});

// Listener
// ===========================================================
app.listen(PORT, function() {
  console.log('App listening on PORT ' + PORT);
});
    
    </script>
  </body>
</html>
